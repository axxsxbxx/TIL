# dplyr 패키지

## 1. 데이터 전처리

- 주어진 데이터를 그대로 사용하기 보다는 원하는 형태로 변형해서 분석하는 경우가 많음
- 분석에 적합하게 데이터를 가공하는 작업을 `데이터 전처리`라고 함
- 데이터의 이상치나 결측치에 대한 처리도 이 단계에서 처리함



## 2. dplyr 패키지

> 데이터프레임에 담겨진 데이터들의 전처리에 가장 많이 사용되는 패키지
>
> - 데이터를 빨리, 쉽게 가공할 수 있도록 도와주는 R 패키지



## 3. chain() 함수 : `%>%` (단축키 : `shift + ctrl + m`)

- 함수 `chain()` 혹은 간단히 `%>%`를 이용함으로써 각 조작을 연결해서 한 번에 수행할 수 있음

> `%>%`로 연결하면 가장 먼저 데이터 프레임을 지정하면 그 다음부터는 인수를 생략할 수 있을 뿐 아니라 앞선 함수의 결과(데이터 프레임)를 뒤에 오는 함수의 입력 값으로 사용하게 됨



## 4. dplyr 패키지의 주요 함수

```R
# filter() : 조건에 따라 행을 추출함
filter(dataframe, condition 1, condition 2, ...) # AND 조건으로 부분집합 선별 
filter(dataframe, condition 1 | condition 2 | ...) # OR 조건으로 부분집합 선별


# slice() : 위치에 따라 행을 추출함
slice(dataframe, from, to) # 위치를 지정해서 데이터 부분집합 선별


# arrange() : 데이터 프레임의 행을 정렬함
# 여러개의 기준에 의해서 정렬을 하고 싶으면 기준 변수를 순서대로 나열함
# 기본 정렬 옵션은 오름차순
arrange(dataframe, order criterion 1, order criterion 2, ...)
# 만약 내림차순으로 정렬을 하고 싶다면 desc()를 입력함
arrange(desc(dataframe, order criterion 1, order criterion 2, ...))


# select() : 조건에 따라 열을 선택함
select(dataframe, VAR1, VAR2, ...) # 선택하고자 하는 변수 이름을 기입
select(dataframe, starts_with("xx_name")) # "xx_name"으로 시작하는 변수
select(dataframe, ends_with("xx_name")) # "xx_name"으로 끝나는 변수
select(dataframe, contains("xx_name")) # "xx_name"을 포함하는 변수
select(dataframe, matches(".xx_string.")) # 정규표현과 일치하는 문자열이 포함된 변수
select(dataframe, one_of(vars)) # 변수 이름 그룹에 포함된 변수 선별
select(dataframe, num_range("V", a:n)) # 접두사와 숫자 범위를 조합해서 변수


# rename() : 열의 이름을 재정의함
rename(dataframe, new_var1 = old_var1, new_var2 = old_var2, ...)


# distinct() : 중복없는 유일한 값을 추출함
distinct(dataframe, 기준 var1, 기준 var2, ...)


# sample_n() : 특정 개수만큼 무작위 추출
sample_n(dataframe, a fixed number)
smaple_n(dataframe, n, replace = TRUE) # 복원 추출


# sample_frac() : 특정 비율만큼 무작위 추출
sample_frac(dataframe, a fixed fraction)


# mutate() : 파생 변수 추가

# group_by(), summarise() : 그룹별 요약 처리
group_by(변수) %>%
	summarise(변수 = 요약하고자 하는 함수)
```

### [자주 사용하는 요약통계량 함수] <!-- {docsify-ignore} --> 

| 함수     | 의미     |
| -------- | -------- |
| mean()   | 평균     |
| sd()     | 표준편차 |
| sum()    | 합계     |
| median() | 중앙값   |
| min()    | 최솟값   |
| max()    | 최댓값   |
| n()      | 빈도     |

